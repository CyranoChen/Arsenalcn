function GridViewCheckBoxBindImpl(n){n.find("input:checkbox").next("label").hide();n.find("a.checkAll").click(function(){n.find("input:checkbox:not(:checked)").each(function(){$(this).prop("checked",!0)})})}function BulkOrderClickImpl(n){var i=n.find("input:checked"),t;i.length>0?(t=[],i.each(function(n,i){t.push($(i).next("label").text())}),$.getJSON("ServerBulkOrder.ashx",{SelectedOrderIDs:t.join("|")},function(n,t){t=="success"&&n!=null?n.result!="error"&&JSON.stringify(n)!="[]"&&(alert($.format("选择订单共{0}个，其中下单成功{1}个，下单失败{2}个",n.countTotal,n.countSucceed,n.countFailed)),window.location.href=window.location.href):alert("调用服务接口失败(BulkOrder)")})):alert("请选择需要下单的订单")}function NationDataBindImpl(n){SwitchNationDataControl(n);var f=n.find("select.Nation"),t=n.find("select#ddlRegion1"),i=n.find("select#ddlRegion2"),r=n.find("input.Region1"),u=n.find("input.Region2");f.change(function(){SwitchNationDataControl($("#tdRegion"))});$.getJSON("ServerRegionCheck.ashx",{RegionID:"0"},function(n,f){f=="success"&&n!=null?n.result!="error"&&JSON.stringify(n)!="[]"?(t.empty(),$.each(n,function(n,i){t.append($("<option>",{value:i.ID}).text(i.Name))}),$.trim(r.val())!=""?(t.val($.trim(r.val())),RegionDataBindImpl($.trim(r.val()),i,$.trim(u.val()))):t.prepend($("<option>",{value:""}).text("--请选择所在地区--"))):(t.empty(),t.hide(),i.empty(),i.hide()):alert("调用数据接口失败(Region)")});t.change(function(){r.val($.trim($(this).val()));u.val("");RegionDataBindImpl($.trim($(this).val()),i,$.trim(u.val()))});i.change(function(){u.val($.trim($(this).val()))})}function RegionDataBindImpl(n,t,i){$.getJSON("ServerRegionCheck.ashx",{RegionID:n},function(n,r){r=="success"&&n!=null?n.result!="error"&&JSON.stringify(n)!="[]"?(t.empty(),$.each(n,function(n,i){t.append($("<option>",{value:i.ID}).text(i.Name))}),i!=""?t.val(i):t.prepend($("<option>",{value:""}).text("--请选择所在地区--")),t.show()):(t.empty(),t.hide()):alert("调用数据接口失败(Region)")})}function SwitchNationDataControl(n){var u=n.find("select.Nation"),i=n.find("input.OtherNation"),r=n.find("select#ddlRegion1"),t=n.find("select#ddlRegion2"),e=n.find("input.Region1"),f=n.find("input.Region2");$.trim(u.val())=="中国"?(i.hide(),r.show(),$.trim(f.val())!=""?t.show():t.hide()):$.trim(u.val())=="其他"?(r.hide(),t.hide(),i.show()):(r.hide(),t.hide(),i.hide())}function AcnCheck(){var t=$("#tdAcnInfo .AcnID"),i=$("#tdAcnInfo .AcnName"),r=$("#tdAcnInfo .AcnSessionKey"),n=$(".FooterBtnBar .SubmitBtn");n.prop("disabled",!0);$.trim(t.val())!=""?$.getJSON("ServerAcnCheck.ashx",{AcnID:$.trim(t.val()),SessionKey:$.trim(r.val())},function(t,r){r=="success"&&t!=null?t.result!="error"&&JSON.stringify(t)!="{}"?(i.val(t.username),n.prop("disabled",!1)):(alert(t.error_msg),n.prop("disabled",!0)):alert("调用数据接口失败(AcnInfo)")}):alert("请输入本会员的AcnID")}function ProductCheck(){var n=$(".ProductInfo .ProductCode"),i=$(".ProductInfo .ProductGuid"),r=$(".ProductInfo .ProductName"),u=$(".ProductInfo .ProductUnitPrice"),f=$(".ProductInfo .ProductQuantity"),e=$(".ProductInfo .ProductTotalPrice"),t=$(".FooterBtnBar .SubmitBtn");t.prop("disabled",!0);$.trim(n.val())!=""?$.getJSON("ServerProductCheck.ashx",{ProductCode:$.trim(n.val())},function(o,s){if(s=="success"&&o!=null)if(o.result!="error"&&JSON.stringify(o)!="{}"){n.val(o.Code);i.val(o.ID);r.val($.format("{0} ({1})",o.DisplayName,o.Name));u.val(o.PriceCNY.toLocaleString());var h=Number(o.PriceCNY)*Number($.trim(f.val()));e.text(h.toLocaleString());t.prop("disabled",!1)}else alert(o.error_msg),t.prop("disabled",!0);else alert("调用数据接口失败(Product)")}):alert("请输入商品编号")}function ProductCheckByID(n){$pnlProductImage=$("#pnlProductImage");$img=$("#pnlProductImage img");n!=""?$.getJSON("ServerProductCheck.ashx",{ProductGuid:n},function(n,t){t=="success"&&n!=null?n.result!="error"&&JSON.stringify(n)!="{}"?($img.attr("src",n.ImageURL),$img.attr("alt",n.DisplayName),$pnlProductImage.show()):alert(n.error_msg):alert("调用数据接口失败(ReplicaKit)")}):$pnlProductImage.hide()}function MemberCheck(){var t=$("#tdMemberInfo .MemberID"),i=$("#tdMemberInfo .MemberName"),n=$(".FooterBtnBar .SubmitBtn");n.prop("disabled",!0);$.trim(t.val())!=""?$.getJSON("ServerMemberCheck.ashx",{MemberID:$.trim(t.val())},function(t,r){r=="success"&&t!=null?t.result!="error"&&JSON.stringify(t)!="{}"?(i.val(t.Name),n.prop("disabled",!1)):(alert(t.error_msg),n.prop("disabled",!0)):alert("调用数据接口失败(Member)")}):alert("请输入本实名会员ID")}function InsertWishItem(n){var t=n.find("tr.WishItem").first().clone(),i=n.find("tr.WishRemark");t.find("input.TextBox").each(function(){$(this).val("")});t.find("span").text("");AutoCompleteProductImpl(t);AutoCalculateProductImpl(t);n.append(t);n.append(i)}function DeleteWishItem(n){var i=$("tbody.ArsenalDirect_WishList tr.WishItem"),t=n.find("input.ProductCode");i.length>1&&($.trim(t.val())!=""?confirm($.format("移除当前许愿商品【{0}】?",$.trim(t.val())))&&n.remove():n.remove())}function AutoCompleteProductImpl(n){$tbWishProductCode=n.find("input.ProductCode");$tbWishProductCode.autocomplete({source:cacheProductCodeList,minLength:2,autoFocus:!0,select:function(t,i){$.trim(i.item.value)!=""&&$.getJSON("ServerProductCheck.ashx",{ProductCode:$.trim(i.item.value)},function(t,i){i=="success"&&t!=null?AutoFillProductImpl(n,t):alert("调用数据接口失败(Product)")})}});$tbWishProductCode.change(function(){$.trim($(this).val())!=""&&$.getJSON("ServerProductCheck.ashx",{ProductCode:$.trim($(this).val())},function(t,i){i=="success"&&t!=null?AutoFillProductImpl(n,t):alert("调用数据接口失败(Product)")})})}function AutoFillProductImpl(n,t){t.ID!=undefined&&(n.find("input.ProductGuid").val(t.ID),n.find("input.ProductCode").val(t.Code),n.find("input.ProductName").val($.format("{0} ({1})",t.DisplayName,t.Name)),n.find("input.ProductSize").val(""),n.find("input.ProductQuantity").val("1"),t.SaleInfo!=""?(n.find("input.ProductPrice").val(t.Sale),n.find("span.ProductPriceInfo").text($.format("{0} × 1 = {0}",t.SaleInfo)).addClass("Sale")):(n.find("input.ProductPrice").val(t.Price),n.find("span.ProductPriceInfo").text($.format("{0} × 1 = {0}",t.PriceInfo)).removeClass("Sale")))}function AutoCalculateProductImpl(n){var t=n.find("input.ProductQuantity");t.change(function(){var f=$(this).parents("tr.WishItem").find("input.ProductPrice"),i=$(this).parents("tr.WishItem").find("span.ProductPriceInfo"),n=$.trim(f.val()),t=$.trim($(this).val()),e=$.trim(i.text()),r,u;n!=""&&t>0&&(r=e.substr(0,1),u=$.format("{0}{1} × {2} = {0}{3}",r,n,t,n*t),i.text(u))})}function UnPackageWishOrderItemList(n){var i=n.find("tr.CommandRow input.WishOrderItemListInfo"),t=n.find("tr.WishItem").first(),r,u;$.trim(i.val())!=""?(r=JSON.parse($.trim(i.val())),u=n.find("tr.WishRemark"),$.each(r,function(i,r){var u=t.clone();UnPackageWishOrderItem(u,r);AutoCompleteProductImpl(u);AutoCalculateProductImpl(u);n.append(u)}),n.append(u),t.remove()):(AutoCompleteProductImpl(t),AutoCalculateProductImpl(t))}function UnPackageWishOrderItem(n,t){n.find("input.OrderItemID").val(t.ID);n.find("input.ProductGuid").val(t.ProductGuid);n.find("input.ProductCode").val(t.Code);n.find("input.ProductName").val(t.ProductName);n.find("input.ProductSize").val(t.Size);n.find("input.ProductQuantity").val(t.Quantity);$.getJSON("ServerProductCheck.ashx",{ProductCode:t.Code},function(i,r){r=="success"&&i!=null?i.ID!=undefined?i.SaleInfo!=""?(n.find("input.ProductPrice").val(i.Sale),n.find("span.ProductPriceInfo").text($.format("{0} × {1} = {2}{3}",i.SaleInfo,t.Quantity,i.CurrencyInfo,i.Sale*t.Quantity)).addClass("Sale")):(n.find("input.ProductPrice").val(i.Price),n.find("span.ProductPriceInfo").text($.format("{0} × {1} = {2}{3}",i.PriceInfo,t.Quantity,i.CurrencyInfo,i.Price*t.Quantity)).removeClass("Sale")):(n.find("input.ProductPrice").val(""),n.find("span.ProductPriceInfo").text("")):alert("调用数据接口失败(Product)")})}function PackageWishOrderItemList(n){var f=n.find("tr.WishItem"),r=n.find("tr.CommandRow input.WishOrderItemListInfo"),u=n.find("tr.CommandRow span.ValiSpan"),t=[],i="";return f.each(function(){i=PackageWishOrderItem($(this));i!=""&&t.push(i)}),t.length>0?(r.val(t),u.hide(),confirm($.format("您将预订【{0}】种商品，是否提交订单信息？",t.length))):(r.val(""),u.show(),!1)}function PackageWishOrderItem(n){var t=JSON.parse(JSON.stringify(cacheOrderItem)),r=n.find("input.ProductGuid"),u=n.find("input.ProductCode"),f=n.find("input.ProductQuantity"),i=$.trim(f.val());return $.trim(r.val())==""&&$.trim(u.val())==""?"":i==""||isNaN(i)||i<=0?"":($.trim(n.find("input.ProductGuid").val())!=""&&(t.ProductGuid=$.trim(n.find("input.ProductGuid").val())),$.trim(n.find("input.ProductCode").val())!=""&&(t.Code=$.trim(n.find("input.ProductCode").val())),$.trim(n.find("input.ProductName").val())!=""&&(t.ProductName=$.trim(n.find("input.ProductName").val())),$.trim(n.find("input.ProductSize").val())!=""&&(t.Size=$.trim(n.find("input.ProductSize").val())),$.trim(n.find("input.ProductQuantity").val())!=""&&(t.Quantity=$.trim(n.find("input.ProductQuantity").val())),$.trim(n.find("input.ProductPrice").val())!=""&&(t.UnitPrice=$.trim(n.find("input.ProductPrice").val())),$.trim(n.find("span.ProductPriceInfo").text())!=""&&(t.Remark=$.trim(n.find("span.ProductPriceInfo").text())),t.CreateTime=$.datenow(),t.IsActive=!0,JSON.stringify(t))}function SwitchLeftPanel(n){n=="CtrlLeftPanelCol"?($("#MainPanel").width("100%"),$.cookie("leftPanel","hidden",{expires:30})):($("#MainPanel").width("78%"),$.cookie("leftPanel",null))}$(document).ready(function(){var n=$("#DataPagerInfo"),t=$(".DataView .Pager > td");n.length>0&&(t.length>0?(n.appendTo(t),n.show()):n.hide());$.cookie("leftPanel")!=null?($("#LeftPanel").hide(),$("#MainPanel").width("100%"),$("#MainPanel .FieldToolBar > div.CtrlLeftPanelExp").attr("class","CtrlLeftPanelCol")):($("#LeftPanel").show(),$("#MainPanel").width("78%"))});jQuery.datenow=function(){var n=new Date,r="-",u=":",t=n.getMonth()+1,i=n.getDate();return t>=1&&t<=9&&(t="0"+t),i>=0&&i<=9&&(i="0"+i),n.getYear()+r+t+r+i+" "+n.getHours()+u+n.getMinutes()+u+n.getSeconds()};jQuery.format=function(n,t){return arguments.length==1?function(){var t=$.makeArray(arguments);return t.unshift(n),$.format.apply(this,t)}:(arguments.length>2&&t.constructor!=Array&&(t=$.makeArray(arguments).slice(1)),t.constructor!=Array&&(t=[t]),$.each(t,function(t,i){n=n.replace(new RegExp("\\{"+t+"\\}","g"),i)}),n)};jQuery.cookie=function(n,t,i){var f,r,e,o,u,s;if(typeof t!="undefined"){i=i||{};t===null&&(t="",i=$.extend({},i),i.expires=-1);f="";i.expires&&(typeof i.expires=="number"||i.expires.toUTCString)&&(typeof i.expires=="number"?(r=new Date,r.setTime(r.getTime()+i.expires*864e5)):r=i.expires,f="; expires="+r.toUTCString());var h=i.path?"; path="+i.path:"",c=i.domain?"; domain="+i.domain:"",l=i.secure?"; secure":"";document.cookie=[n,"=",encodeURIComponent(t),f,h,c,l].join("")}else{if(e=null,document.cookie&&document.cookie!="")for(o=document.cookie.split(";"),u=0;u<o.length;u++)if(s=jQuery.trim(o[u]),s.substring(0,n.length+1)==n+"="){e=decodeURIComponent(s.substring(n.length+1));break}return e}};
//# sourceMappingURL=iarsenal.min.js.map
